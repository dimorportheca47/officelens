(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[6],{571:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var c="\n  query QueryDeviceInfoTables(\n    $PartitionKey: String!\n    $filter: TableDeviceInfoTableFilterInput\n    $limit: Int\n    $nextToken: String\n  ) {\n    queryDeviceInfoTables(\n      PartitionKey: $PartitionKey\n      filter: $filter\n      limit: $limit\n      nextToken: $nextToken\n    ) {\n      items {\n        Alias\n        IsConnected\n        IsOccupied\n        PartitionKey\n        SensorID\n        SortKey\n      }\n      nextToken\n    }\n  }\n"},633:function(e,n,t){"use strict";t.r(n);var c=t(139),a=t(585),r=t(570),o=t.n(r),i=t(573),s=t(187),l=t(389),u=t(535),f=t(571),b=t(343),j=t.n(b),d=t(566),O=t.n(d),p=t(0),x=t(219),v=t(345),y=(t(587),t(625)),m=t(627),h=t(628),I=t(629),K=t(235),S=t.n(K),g=t(218),C=t.n(g),D=t(595),T=t.n(D),k=t(186),P=t.n(k),$=t(38);function q(){return Object(y.b)({click:function(e){}}),[Object($.jsx)("div",{},"CheckLatLng")]}function w(){var e=[],n=Object(p.useContext)(x.a)[0],t=Object(p.useContext)(x.b),c=Object(s.a)(t,2),r=c[0],u=c[1],b=n.office+"_"+n.floor;Object(p.useEffect)((function(){Object(i.a)(o.a.mark((function e(){var n,t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.a.graphql({query:f.a,variables:{PartitionKey:b,limit:100}});case 3:n=e.sent,t=n.data.queryDeviceInfoTables.items,c=t.map((function(e){return e.SortKey in v.d?(e.pos=v.d[e.SortKey],e):null})).filter((function(e){return null!==e})),u(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[u,n,b]);var j,d=Object(a.a)(r);try{for(d.s();!(j=d.n()).done;){var O=j.value;"undefined"!==typeof O.PartitionKey&&(O.IsConnected?O.IsOccupied&&e.push(Object($.jsx)("div",{children:Object($.jsx)(m.a,{position:O.pos,icon:v.a})},O.SortKey)):e.push(Object($.jsx)("div",{children:Object($.jsx)(m.a,{position:O.pos,icon:v.c,children:Object($.jsx)(h.a,{children:"Disconnected"})})},O.SortKey)))}}catch(y){d.e(y)}finally{d.f()}return e}function L(){var e=Object(p.useContext)(x.b)[1],n=Object(p.useContext)(x.a)[0],t=n.office+"_"+n.floor;return Object(p.useEffect)((function(){var n=l.a.graphql(Object(u.b)("\n  subscription OnLambdaDeviceInfoTable {\n    onLambdaDeviceInfoTable {\n      Alias\n      IsConnected\n      IsOccupied\n      PartitionKey\n      SensorID\n      SortKey\n    }\n  }\n")).subscribe({next:function(n){var c=n.value.data.onLambdaDeviceInfoTable;c.PartitionKey===t&&(c.pos=v.d[c.SortKey],e((function(e){return e.map((function(e){return e.SortKey===c.SortKey?c:e}))})))}});return function(){return n.unsubscribe()}}),[e,n,t]),null}function _(){var e,n,t=Object(p.useContext)(x.a)[0],c="./floormap/"+t.office+"_"+t.floor+".png",a=Object(y.a)(),r=new Image;return r.onload=function(){n=r.naturalWidth/r.naturalHeight,e=[[-128/n,-128],[128/n,128]],a.addLayer(P.a.imageOverlay(c,e))},r.src=c,null}P.a.Icon.Default.imagePath="//cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/";n.default=function(){var e=Object(p.useContext)(x.a),n=Object(s.a)(e,2),t=n[0],a=n[1];return Object($.jsx)(O.a,{title:t.office+"_"+t.floor,subtitle:Object($.jsxs)(C.a,{spacing:"xs",children:[Object($.jsx)(T.a,{fontSize:"small",style:{color:"black"}}),Object($.jsx)(S.a,{variant:"small",children:"Occupied"}),Object($.jsx)(T.a,{fontSize:"small",style:{color:"red"}}),Object($.jsx)(S.a,{variant:"small",children:"Disconnected"})]}),actionGroup:Object($.jsx)(C.a,{spacing:"xs",children:Object($.jsx)(j.a,{options:v.b[t.office],selectedOption:{value:t.floor},onChange:function(e){a((function(n){return Object(c.a)(Object(c.a)({},n),{},{floor:e.target.value})}))}})}),children:Object($.jsx)("div",{id:"wrapper",children:Object($.jsxs)(I.a,{zoom:1,center:[0,0],scrollWheelZoom:!0,crs:k.CRS.Simple,maxZoom:3,children:[Object($.jsx)(_,{}),Object($.jsx)(L,{}),Object($.jsx)(w,{}),Object($.jsx)(q,{})]})})})}}}]);
//# sourceMappingURL=6.065b202d.chunk.js.map